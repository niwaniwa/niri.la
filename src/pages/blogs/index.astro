---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// blogを取得。 日付を降順
const posts = (await getCollection("blogs", ({ data }) => !data.draft)).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="Blog | niri.la">
  <main class="max-w-4xl mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold mb-8">Blog</h1>

    <ul class="space-y-6">
      {
        posts.map((post) => (
          <li>
            <a
              href={`/blogs/${post.id.replace(/\.md$/, "")}`}
              class="block p-4 rounded-lg hover:bg-base-200"
            >
              <h2 class="text-xl font-semibold text-primary">
                {post.data.title}
              </h2>
              <p class="text-base-content/70 mt-1">{post.data.description}</p>
              <time class="text-sm text-base-content/50 mt-2 block">
                {post.data.pubDate.toLocaleDateString("ja-JP")}
              </time>
            </a>
          </li>
        ))
      }
    </ul>
  </main>
</BaseLayout>
