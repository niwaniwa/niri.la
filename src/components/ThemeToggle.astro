---
import { Icon } from "astro-icon/components";
---

<!-- reference: https://yamatatsu-maru.com/blogs/2025-05-14-implement-dark-mode-astro-tailwindcssv4/ -->
<button
  id="theme-toggle"
  type="button"
  class="text-secondary-content hover:text-accent"
  aria-label="ダークモード切り替え"
>
  <Icon name="mdi:theme-light-dark" size={24} />
</button>

<script is:inline>
  const clickHandleToggleTheme = () => {
    const themeToggle = document.getElementById("theme-toggle");

    if (themeToggle) {
      themeToggle.addEventListener("click", () => {
        const element = document.documentElement;
        element.classList.toggle("dark");

        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
    }
  };
  clickHandleToggleTheme();

  document.addEventListener("astro:page-load", clickHandleToggleTheme);
</script>
