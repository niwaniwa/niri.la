---
import Prose from "../components/Prose.astro";
import { render, type CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"blogs"> | CollectionEntry<"works">;
}

const { post } = Astro.props;
const { Content } = await render(post);
const { title, pubDate, tags, emoji, image } = post.data;
---

<article class="max-w-4xl mx-auto px-4 py-12">
  <header class="mb-8">
    {
      image && (
        <div class="w-full h-48 mb-6 rounded-lg overflow-hidden">
          <img src={image} alt="" class="w-full h-full object-cover" />
        </div>
      )
    }

    {emoji && !image && <div class="text-6xl mb-4">{emoji}</div>}

    <h1 class="text-3xl font-bold mb-2">{title}</h1>

    <div class="flex items-center gap-4 text-base-content/50">
      <time>{pubDate.toLocaleDateString("ja-JP")}</time>

      {
        tags && tags.length > 0 && (
          <ul class="flex gap-2">
            {tags.map((tag) => (
              <li>
                <a
                  href={`/tags/${tag}`}
                  class="text-sm px-2 py-1 bg-base-200 rounded hover:bg-primary hover:text-primary-content"
                >
                  {tag}
                </a>
              </li>
            ))}
          </ul>
        )
      }
    </div>
  </header>

  <Prose>
    <Content />
  </Prose>
</article>
